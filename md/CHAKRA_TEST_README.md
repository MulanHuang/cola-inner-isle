# 🌈 脉轮测试工具 - 完整使用指南

## 📋 目录

- [功能概述](#功能概述)
- [文件结构](#文件结构)
- [快速开始](#快速开始)
- [UI 设计](#ui-设计)
- [题库说明](#题库说明)
- [评分算法](#评分算法)
- [数据库配置](#数据库配置)
- [测试流程](#测试流程)

---

## 🎯 功能概述

脉轮测试工具是「可乐心岛」小程序的自我探索模块之一，帮助用户了解自己的七大能量中心（脉轮）状态。

### 核心功能

✅ **80 道专业测试题目** - 覆盖 7 个脉轮，每个脉轮 11-12 题
✅ **智能评分系统** - 自动计算每个脉轮的能量百分比
✅ **详细解读报告** - 高中低三档解读 + 个性化建议
✅ **进度保存** - 自动保存测试进度，可随时继续
✅ **历史记录** - 云端保存测试历史，可查看过往结果
✅ **治愈系 UI** - 柔和奶油色配色，圆角卡片设计

### 七大脉轮

1. 🔴 **海底轮** (Root Chakra) - 安全感、稳定、生存
2. 🟠 **腹轮** (Sacral Chakra) - 创造力、情感、愉悦
3. 🟡 **太阳神经丛轮** (Solar Plexus Chakra) - 力量、自信、意志
4. 💚 **心轮** (Heart Chakra) - 爱、慈悲、连接
5. 🔵 **喉轮** (Throat Chakra) - 表达、真实、沟通
6. 🟣 **眉心轮** (Third Eye Chakra) - 直觉、洞察、智慧
7. ⚪ **顶轮** (Crown Chakra) - 灵性、合一、超越

---

## 📁 文件结构

```
pages/
├── chakraTest/                    # 脉轮测试页面
│   ├── index.wxml                 # 测试页面结构
│   ├── index.wxss                 # 测试页面样式
│   ├── index.js                   # 测试页面逻辑
│   ├── index.json                 # 测试页面配置
│   └── data/                      # 数据文件夹
│       ├── questions.js           # 80 道题库
│       └── chakraInfo.js          # 脉轮信息和评分算法
│
├── chakraResult/                  # 结果页面
│   ├── index.wxml                 # 结果页面结构
│   ├── index.wxss                 # 结果页面样式
│   ├── index.js                   # 结果页面逻辑
│   └── index.json                 # 结果页面配置
│
└── explore/                       # 自我探索页面（已更新）
    ├── explore.wxml               # 添加了脉轮测试入口
    └── explore.js                 # 添加了跳转逻辑

文档/
├── CHAKRA_TEST_README.md          # 本文档
└── CHAKRA_TEST_DATABASE.md        # 数据库结构文档
```

---

## 🚀 快速开始

### 1. 文件已就绪

所有文件已自动生成并放置在正确位置：
- ✅ 测试页面：`pages/chakraTest/`
- ✅ 结果页面：`pages/chakraResult/`
- ✅ 题库数据：`pages/chakraTest/data/`
- ✅ 配置更新：`app.json`
- ✅ 入口添加：`pages/explore/explore.wxml`

### 2. 配置云数据库

在微信云开发控制台：

1. 进入「云开发」→「数据库」
2. 点击「添加集合」
3. 输入集合名称：`chakra_history`
4. 权限设置：「仅创建者可读写」

详细配置请参考：[CHAKRA_TEST_DATABASE.md](./CHAKRA_TEST_DATABASE.md)

### 3. 编译运行

1. 在微信开发者工具中点击「编译」
2. 进入「自我探索」页面
3. 点击「脉轮测试」卡片
4. 开始测试！

---

## 🎨 UI 设计

### 配色方案

遵循「可乐心岛」整体风格：

- **主色调**：`#8B7355`（棕色）
- **辅助色**：`#B8956A`（浅棕）
- **背景色**：`#F5F1E8`（米色）
- **卡片背景**：`#FFFFFF`（白色）
- **渐变背景**：`linear-gradient(135deg, #fff9f0 0%, #ffffff 100%)`

### 脉轮专属颜色

- 海底轮：`#E53935` (红色)
- 腹轮：`#FF6F00` (橙色)
- 太阳神经丛轮：`#FDD835` (黄色)
- 心轮：`#43A047` (绿色)
- 喉轮：`#1E88E5` (蓝色)
- 眉心轮：`#5E35B1` (靛蓝)
- 顶轮：`#9C27B0` (紫色)

### 设计元素

- **圆角**：20rpx（卡片）、50rpx（按钮）
- **阴影**：`0 4rpx 12rpx rgba(139, 115, 85, 0.08)`
- **字体大小**：
  - 标题：48rpx
  - 副标题：32rpx
  - 正文：28rpx
  - 辅助文字：24rpx

---

## 📝 题库说明

### 题目分布

| 脉轮 | 题目编号 | 题目数量 |
|------|---------|---------|
| 海底轮 | 1-12 | 12 题 |
| 腹轮 | 13-23 | 11 题 |
| 太阳神经丛轮 | 24-35 | 12 题 |
| 心轮 | 36-47 | 12 题 |
| 喉轮 | 48-58 | 11 题 |
| 眉心轮 | 59-69 | 11 题 |
| 顶轮 | 70-80 | 11 题 |
| **总计** | **1-80** | **80 题** |

### 选项设置

每题 5 个选项（李克特量表）：

1. **完全不是** - 1 分
2. **有一点** - 2 分
3. **中等** - 3 分
4. **比较是** - 4 分
5. **完全是** - 5 分

### 题目特点

- ✅ 所有题目为**负向题**（分数越高表示问题越严重）
- ✅ 评分时会**自动反转**（5→1, 4→2, 3→3, 2→4, 1→5）
- ✅ 题目涵盖情绪、身体、关系、灵性等多个维度

---

## 🧮 评分算法

### 计算公式

```javascript
// 1. 收集该脉轮的所有题目答案
// 2. 反转分数（因为是负向题）
reversedScore = 6 - originalScore

// 3. 计算总分
totalScore = sum(reversedScores)

// 4. 计算百分比
percentage = (totalScore / maxScore) * 100

// 5. 根据百分比给出解读
if (percentage >= 80) → 高分解读（能量充沛）
else if (percentage >= 50) → 中分解读（基本平衡）
else → 低分解读（能量受阻）
```

### 解读等级

| 百分比 | 等级 | 说明 |
|--------|------|------|
| 80-100% | 🌟 高分 | 能量充沛，该脉轮非常健康 |
| 50-79% | ⭐ 中分 | 基本平衡，有提升空间 |
| 0-49% | 💫 低分 | 能量受阻，需要疗愈 |

---

## 💾 数据库配置

详细配置请参考：[CHAKRA_TEST_DATABASE.md](./CHAKRA_TEST_DATABASE.md)

### 快速配置

1. 创建集合：`chakra_history`
2. 权限设置：仅创建者可读写
3. 索引：`_openid` + `testDate`（降序）

---

## 🔄 测试流程

### 用户流程

```
1. 进入自我探索页面
   ↓
2. 点击「脉轮测试」卡片
   ↓
3. 开始答题（80 题）
   - 显示进度条
   - 可上一题/下一题
   - 自动保存进度
   ↓
4. 提交测试
   - 确认弹窗
   ↓
5. 查看结果
   - 7 个脉轮能量图
   - 详细解读
   - 个性化建议
   ↓
6. 选择操作
   - 重新测试
   - 返回首页
```

### 技术流程

```javascript
// 1. 加载题库
const questions = CHAKRA_QUESTIONS; // 80 题

// 2. 用户答题
answers[questionId] = selectedValue;

// 3. 保存进度（本地）
wx.setStorageSync('chakra_test_progress', JSON.stringify(answers));

// 4. 计算结果
const results = {
  root: calculateChakraScore(answers, 'root'),
  // ... 其他脉轮
};

// 5. 保存到云数据库
db.collection('chakra_history').add({
  data: { answers, results, testDate: new Date() }
});

// 6. 跳转结果页
wx.redirectTo({
  url: `/pages/chakraResult/index?results=${JSON.stringify(results)}`
});
```

---

## ✨ 特色功能

### 1. 进度保存

- 自动保存到本地存储
- 下次进入可继续测试
- 提交后自动清除

### 2. 历史记录

- 云端保存所有测试记录
- 可查看历史结果
- 支持对比分析（可扩展）

### 3. 个性化建议

每个脉轮提供：
- 🧘‍♀️ 冥想建议
- 💡 实践建议（4-5 条）
- ✨ 正念宣言

### 4. 分享功能

- 支持分享到微信好友
- 自定义分享文案和图片

---

## 🎯 下一步优化建议

1. **历史对比**：添加历史测试结果对比功能
2. **数据可视化**：使用图表展示脉轮能量变化
3. **冥想推荐**：根据测试结果推荐相应的冥想音频
4. **社区分享**：允许用户分享测试心得
5. **定期提醒**：提醒用户定期重测，追踪进步

---

## 📞 技术支持

如有问题，请检查：
1. 云开发是否已开通
2. 数据库集合是否已创建
3. 权限设置是否正确
4. 网络连接是否正常

---

## 🌟 结语

愿你的能量如莲花般绽放，在生命的旅程中找到平衡与和谐。🌸

