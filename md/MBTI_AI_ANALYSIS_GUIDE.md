# ğŸ¤– MBTI AI æ·±åº¦è§£è¯» - éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [åŠŸèƒ½è¯´æ˜](#åŠŸèƒ½è¯´æ˜)
2. [éƒ¨ç½²æ–¹æ¡ˆ](#éƒ¨ç½²æ–¹æ¡ˆ)
3. [æ–¹æ¡ˆä¸€ï¼šå¾®ä¿¡äº‘å‡½æ•°ï¼ˆæ¨èï¼‰](#æ–¹æ¡ˆä¸€å¾®ä¿¡äº‘å‡½æ•°æ¨è)
4. [æ–¹æ¡ˆäºŒï¼šç‹¬ç«‹æœåŠ¡å™¨](#æ–¹æ¡ˆäºŒç‹¬ç«‹æœåŠ¡å™¨)
5. [Prompt è®¾è®¡è¯´æ˜](#prompt-è®¾è®¡è¯´æ˜)
6. [æµ‹è¯•ä¸è°ƒè¯•](#æµ‹è¯•ä¸è°ƒè¯•)

---

## åŠŸèƒ½è¯´æ˜

MBTI AI æ·±åº¦è§£è¯»åŠŸèƒ½ä¼šæ ¹æ®ç”¨æˆ·çš„æµ‹è¯•ç»“æœï¼Œç”Ÿæˆä¸€ä»½æ¸©æŸ”ã€äººæ€§åŒ–ã€æœ‰è¾¹ç•Œæ„Ÿçš„æ€§æ ¼åˆ†ææŠ¥å‘Šã€‚

### è¾“å…¥å‚æ•°

```javascript
{
  type: "INFJ",           // MBTI ç±»å‹
  scores: {               // å„ç»´åº¦å¾—åˆ†
    E: 5, I: 13,
    S: 8, N: 10,
    T: 7, F: 10,
    J: 11, P: 6
  },
  answers: [...]          // ç­”é¢˜è®°å½•ï¼ˆå¯é€‰ï¼‰
}
```

### è¾“å‡ºå†…å®¹

```
1. æ ¸å¿ƒç‰¹è´¨æ€»ç»“ï¼ˆ1 æ®µï¼Œ80-120 å­—ï¼‰
2. èƒ½é‡ä¸æƒ…ç»ªæ¨¡å¼ï¼ˆ1 æ®µï¼Œ100-150 å­—ï¼‰
3. äººé™…ä¸å…³ç³»é£æ ¼ï¼ˆ1 æ®µï¼Œ100-150 å­—ï¼‰
4. å·¥ä½œä¸å­¦ä¹ é£æ ¼ï¼ˆ1 æ®µï¼Œ100-150 å­—ï¼‰
5. æ¸©æŸ”çš„æˆé•¿å»ºè®®ï¼ˆ3-5 æ¡ï¼Œæ¯æ¡ 30-50 å­—ï¼‰
```

---

## éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ           | ä¼˜ç‚¹                                 | ç¼ºç‚¹               | é€‚ç”¨åœºæ™¯             |
| -------------- | ------------------------------------ | ------------------ | -------------------- |
| **å¾®ä¿¡äº‘å‡½æ•°** | æ— éœ€æœåŠ¡å™¨ã€è‡ªåŠ¨æ‰©å®¹ã€ä¸å°ç¨‹åºé›†æˆå¥½ | éœ€è¦å¾®ä¿¡äº‘å¼€å‘ç¯å¢ƒ | æ¨èï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ |
| **ç‹¬ç«‹æœåŠ¡å™¨** | çµæ´»æ€§é«˜ã€å¯è‡ªå®šä¹‰                   | éœ€è¦ç»´æŠ¤æœåŠ¡å™¨     | å·²æœ‰åç«¯æœåŠ¡çš„é¡¹ç›®   |

---

## æ–¹æ¡ˆä¸€ï¼šå¾®ä¿¡äº‘å‡½æ•°ï¼ˆæ¨èï¼‰

### 1. å‡†å¤‡å·¥ä½œ

#### 1.1 å¼€é€šå¾®ä¿¡äº‘å¼€å‘

1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€é¡¹ç›®
2. ç‚¹å‡»"äº‘å¼€å‘"æŒ‰é’®
3. åˆ›å»ºäº‘å¼€å‘ç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
4. è®°å½•ç¯å¢ƒ ID

#### 1.2 åˆå§‹åŒ–äº‘å¼€å‘

åœ¨ `app.js` ä¸­æ·»åŠ ï¼š

```javascript
App({
  onLaunch() {
    // åˆå§‹åŒ–äº‘å¼€å‘
    wx.cloud.init({
      env: "your-env-id", // æ›¿æ¢ä¸ºä½ çš„ç¯å¢ƒ ID
      traceUser: true,
    });
  },
});
```

### 2. éƒ¨ç½²äº‘å‡½æ•°

#### 2.1 ä¸Šä¼ äº‘å‡½æ•°

1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œå³é”®ç‚¹å‡» `cloudfunctions/mbti-analyze` æ–‡ä»¶å¤¹
2. é€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"
3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

#### 2.2 é…ç½® AI æœåŠ¡

åœ¨äº‘å‡½æ•°ä¸­é›†æˆ AI æœåŠ¡ï¼ˆé€‰æ‹©ä¸€ç§ï¼‰ï¼š

**é€‰é¡¹ Aï¼šä½¿ç”¨ OpenAI**

```javascript
// åœ¨äº‘å‡½æ•°ä¸­å®‰è£… openai
// cloudfunctions/mbti-analyze/package.json æ·»åŠ ä¾èµ–
{
  "dependencies": {
    "wx-server-sdk": "~2.6.3",
    "openai": "^4.20.0"
  }
}

// åœ¨ index.js ä¸­è°ƒç”¨
const OpenAI = require('openai');
const openai = new OpenAI({
  apiKey: 'YOUR_OPENAI_API_KEY'
});

const completion = await openai.chat.completions.create({
  model: "gpt-4",
  messages: [
    { role: "system", content: SYSTEM_PROMPT },
    { role: "user", content: userPrompt }
  ],
  temperature: 1,
  max_tokens: 1500
});

const analysis = completion.choices[0].message.content;
```

**é€‰é¡¹ Bï¼šä½¿ç”¨å›½å†… AI æœåŠ¡ï¼ˆå¦‚é€šä¹‰åƒé—®ã€æ–‡å¿ƒä¸€è¨€ï¼‰**

```javascript
// ç¤ºä¾‹ï¼šè°ƒç”¨é€šä¹‰åƒé—®
const axios = require("axios");

const response = await axios.post(
  "https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation",
  {
    model: "qwen-turbo",
    input: {
      messages: [
        { role: "system", content: SYSTEM_PROMPT },
        { role: "user", content: userPrompt },
      ],
    },
    parameters: {
      temperature: 0.7,
    },
  },
  {
    headers: {
      Authorization: `Bearer YOUR_API_KEY`,
      "Content-Type": "application/json",
    },
  }
);

const analysis = response.data.output.text;
```

### 3. å‰ç«¯è°ƒç”¨

å‰ç«¯ä»£ç å·²ç»é…ç½®å¥½ï¼Œé»˜è®¤ä½¿ç”¨äº‘å‡½æ•°ï¼š

```javascript
// pages/mbti-result/mbti-result.js
getAiAnalysis() {
  wx.showLoading({ title: 'ç”Ÿæˆä¸­...', mask: true });

  const { type, scores } = this.data;

  // è°ƒç”¨äº‘å‡½æ•°
  this.callCloudFunction(type, scores);
}
```

---

## æ–¹æ¡ˆäºŒï¼šç‹¬ç«‹æœåŠ¡å™¨

### 1. å®‰è£…ä¾èµ–

```bash
cd server
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env`ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
PORT=3000
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. å¯åŠ¨æœåŠ¡å™¨

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

### 4. å‰ç«¯é…ç½®

ä¿®æ”¹ `pages/mbti-result/mbti-result.js`ï¼š

```javascript
getAiAnalysis() {
  wx.showLoading({ title: 'ç”Ÿæˆä¸­...', mask: true });

  const { type, scores } = this.data;

  // ä½¿ç”¨ HTTP API
  this.callHttpAPI(type, scores);
}

callHttpAPI(type, scores) {
  wx.request({
    url: 'https://your-domain.com/api/mbti/analyze', // æ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨åœ°å€
    method: 'POST',
    data: { type, scores },
    // ...
  });
}
```

### 5. éƒ¨ç½²åˆ°æœåŠ¡å™¨

æ¨èä½¿ç”¨ä»¥ä¸‹å¹³å°ï¼š

- **Vercel**ï¼ˆå…è´¹ï¼Œé€‚åˆ Node.jsï¼‰
- **Railway**ï¼ˆå…è´¹é¢åº¦ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼‰
- **é˜¿é‡Œäº‘/è…¾è®¯äº‘**ï¼ˆéœ€è¦å¤‡æ¡ˆï¼‰

---

## Prompt è®¾è®¡è¯´æ˜

### System Prompt ç‰¹ç‚¹

1. **æ¸©æŸ”ã€äººæ€§åŒ–**ï¼šé¿å…ç”Ÿç¡¬çš„å¿ƒç†å­¦æœ¯è¯­
2. **æœ‰è¾¹ç•Œæ„Ÿ**ï¼šä¸ä¸‹å®šè®ºï¼Œä¸è´´æ ‡ç­¾
3. **å…±æƒ…å¼è¡¨è¾¾**ï¼šä½¿ç”¨ç¬¬äºŒäººç§°"ä½ "
4. **ç»“æ„åŒ–è¾“å‡º**ï¼šç¡®ä¿å†…å®¹å®Œæ•´ä¸”æ ¼å¼ç»Ÿä¸€

### User Prompt ç‰¹ç‚¹

1. **åŒ…å«å®Œæ•´ä¿¡æ¯**ï¼šç±»å‹ã€å¾—åˆ†ã€ç»´åº¦åˆ†æ
2. **çªå‡ºå·®å¼‚**ï¼šæ ‡æ³¨å„ç»´åº¦çš„å€¾å‘ç¨‹åº¦
3. **æ˜ç¡®è¦æ±‚**ï¼šæŒ‡å®šè¾“å‡ºç»“æ„å’Œå­—æ•°

### ä¼˜åŒ–å»ºè®®

å¦‚æœç”Ÿæˆçš„å†…å®¹ä¸å¤Ÿç†æƒ³ï¼Œå¯ä»¥è°ƒæ•´ï¼š

1. **æ¸©åº¦å‚æ•°**ï¼ˆtemperatureï¼‰ï¼š

   - 0.5-0.7ï¼šæ›´ç¨³å®šã€ä¸“ä¸š
   - 0.7-0.9ï¼šæ›´æœ‰åˆ›æ„ã€ä¸ªæ€§åŒ–

2. **æœ€å¤§ Token æ•°**ï¼ˆmax_tokensï¼‰ï¼š

   - 1000-1500ï¼šé€‚ä¸­é•¿åº¦
   - 1500-2000ï¼šæ›´è¯¦ç»†

3. **Prompt ç»†èŠ‚**ï¼š
   - æ·»åŠ æ›´å¤šç¤ºä¾‹
   - å¼ºè°ƒç‰¹å®šé£æ ¼
   - è°ƒæ•´å­—æ•°è¦æ±‚

---

## æµ‹è¯•ä¸è°ƒè¯•

### 1. æµ‹è¯•äº‘å‡½æ•°

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š

```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
wx.cloud
  .callFunction({
    name: "mbti-analyze",
    data: {
      type: "INFJ",
      scores: { E: 5, I: 13, S: 8, N: 10, T: 7, F: 10, J: 11, P: 6 },
    },
  })
  .then(console.log)
  .catch(console.error);
```

### 2. æµ‹è¯• HTTP API

ä½¿ç”¨ Postman æˆ– curlï¼š

```bash
curl -X POST http://localhost:3000/api/mbti/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "type": "INFJ",
    "scores": {"E":5,"I":13,"S":8,"N":10,"T":7,"F":10,"J":11,"P":6}
  }'
```

### 3. æŸ¥çœ‹æ—¥å¿—

- **äº‘å‡½æ•°**ï¼šåœ¨äº‘å¼€å‘æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—
- **æœåŠ¡å™¨**ï¼šæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºæˆ–æ—¥å¿—æ–‡ä»¶

---

## å¸¸è§é—®é¢˜

### Q1: äº‘å‡½æ•°è°ƒç”¨å¤±è´¥ï¼Ÿ

- æ£€æŸ¥äº‘å¼€å‘ç¯å¢ƒæ˜¯å¦åˆå§‹åŒ–
- æ£€æŸ¥äº‘å‡½æ•°æ˜¯å¦æ­£ç¡®éƒ¨ç½²
- æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—æ’æŸ¥é”™è¯¯

### Q2: AI è¿”å›å†…å®¹æ ¼å¼ä¸å¯¹ï¼Ÿ

- æ£€æŸ¥ Prompt æ˜¯å¦å®Œæ•´
- è°ƒæ•´ temperature å‚æ•°
- å¢åŠ ç¤ºä¾‹æˆ–æ›´æ˜ç¡®çš„è¦æ±‚

### Q3: è°ƒç”¨è¶…æ—¶ï¼Ÿ

- å¢åŠ äº‘å‡½æ•°è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 20 ç§’ï¼‰
- ä¼˜åŒ– Prompt é•¿åº¦
- è€ƒè™‘ä½¿ç”¨æ›´å¿«çš„ AI æ¨¡å‹

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ çš„ MBTI æµ‹è¯•åŠŸèƒ½å·²ç»å…·å¤‡å®Œæ•´çš„ AI æ·±åº¦è§£è¯»èƒ½åŠ›äº†ï¼
