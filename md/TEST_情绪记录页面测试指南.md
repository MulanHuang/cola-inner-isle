# 🧪 情绪记录页面测试指南

## 📋 测试前准备

### 1. 导入数据到云数据库

**步骤：**
1. 打开微信开发者工具
2. 进入「云开发控制台」→「数据库」
3. 找到 `quotes` 集合（如果没有则创建）
4. 点击「导入」按钮
5. 选择 `database/init-data/emotion-quotes.json`
6. 确认导入

**验证：**
```javascript
// 在云开发控制台执行
db.collection('quotes').where({ category: 'emotion' }).count()
// 应返回：{ total: 15 }
```

---

## 🧪 功能测试

### 测试 1：页面加载显示文案

**操作：**
1. 在微信开发者工具中打开小程序
2. 导航到「情绪记录」页面

**预期结果：**
- ✅ 页面顶部显示"温暖一句"卡片
- ✅ 卡片背景为粉色渐变
- ✅ 显示 💖 图标
- ✅ 显示一条文案（默认或从数据库加载）
- ✅ 底部显示"🔄 换一句"按钮

**截图位置：** 页面顶部，在"💭 情绪记录"标题下方

---

### 测试 2：点击"换一句"按钮

**操作：**
1. 在情绪记录页面
2. 点击"🔄 换一句"按钮
3. 重复点击 3-5 次

**预期结果：**
- ✅ 每次点击后文案会随机切换
- ✅ 文案不会重复（在 15 条文案中随机）
- ✅ 切换流畅，无卡顿
- ✅ 不影响页面其他功能

---

### 测试 3：数据库加载失败处理

**操作：**
1. 在云开发控制台暂时删除 `quotes` 集合中的情绪文案
2. 刷新小程序页面

**预期结果：**
- ✅ 显示默认文案："你的感受是真实的，值得被看见"
- ✅ 页面不报错，不崩溃
- ✅ 其他功能正常使用

---

### 测试 4：现有功能不受影响

**操作：**
1. 选择一个情绪（如"开心"）
2. 输入文字描述
3. 选择标签
4. 点击"保存记录"
5. 点击"让 AI 温柔回应"

**预期结果：**
- ✅ 所有现有功能正常工作
- ✅ 情绪选择、标签选择、文字输入不受影响
- ✅ AI 回应功能正常
- ✅ 保存功能正常

---

### 测试 5：页面滚动和布局

**操作：**
1. 在情绪记录页面上下滚动
2. 输入长文本（接近 500 字）
3. 选择多个标签

**预期结果：**
- ✅ "温暖一句"卡片固定在顶部（不跟随滚动）
- ✅ 页面布局不错乱
- ✅ 所有元素间距合理
- ✅ 在不同屏幕尺寸下显示正常

---

## 📱 兼容性测试

### 测试不同设备

**测试设备：**
- iPhone（iOS 模拟器）
- Android（Android 模拟器）
- 真机测试（如果可能）

**检查项：**
- ✅ 文案显示完整，不被截断
- ✅ 按钮可点击，响应灵敏
- ✅ 颜色渐变显示正常
- ✅ 字体大小适中，易读

---

## 🎨 视觉验收

### 对比首页"今日一句"

**检查项：**
- ✅ 卡片圆角、阴影效果一致
- ✅ 文字大小、行高一致
- ✅ 按钮样式一致（仅颜色不同）
- ✅ 整体风格协调

### 情绪页面专属设计

**检查项：**
- ✅ 背景色为粉色渐变（#FFF0F5 → #FFE4E9）
- ✅ 图标为 💖（爱心）
- ✅ 按钮颜色为粉红色（#FF6987）
- ✅ 与情绪主题协调

---

## 🐛 常见问题排查

### 问题 1：文案不显示或显示默认文案

**可能原因：**
- 数据库未导入文案
- 云开发环境未初始化
- 网络连接问题

**解决方法：**
1. 检查云数据库 `quotes` 集合是否有 `category: "emotion"` 的记录
2. 检查云开发环境 ID 是否正确配置
3. 查看控制台是否有错误日志

---

### 问题 2：点击"换一句"无反应

**可能原因：**
- 数据库查询失败
- 方法绑定错误

**解决方法：**
1. 检查 `refreshEmotionQuote` 方法是否正确绑定
2. 查看控制台错误日志
3. 检查云数据库权限设置

---

### 问题 3：样式显示异常

**可能原因：**
- WXSS 文件未保存
- 样式类名冲突

**解决方法：**
1. 重新编译小程序
2. 检查 `.emotion-quote-card` 样式是否正确加载
3. 清除缓存后重试

---

## ✅ 测试完成清单

- [ ] 页面加载显示文案
- [ ] 点击"换一句"功能正常
- [ ] 数据库加载失败处理正确
- [ ] 现有功能不受影响
- [ ] 页面滚动和布局正常
- [ ] iOS 设备显示正常
- [ ] Android 设备显示正常
- [ ] 视觉效果符合设计要求

---

## 📝 测试报告模板

**测试日期：** ___________  
**测试人员：** ___________  
**测试环境：** ___________  

**测试结果：**
- [ ] 通过
- [ ] 未通过（请说明原因）

**问题记录：**
1. ___________
2. ___________

**建议改进：**
1. ___________
2. ___________

