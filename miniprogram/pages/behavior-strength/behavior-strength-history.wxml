<!-- pages/behavior-strength/behavior-strength-history.wxml -->

<view class="container">
  <view wx:if="{{!historyList.length}}" class="empty">
    <view class="empty-title">还没有历史记录</view>
    <view class="empty-desc">完成一次测评后，这里会保存你的画像报告。</view>
  </view>

  <view wx:else>
    <view class="list">
      <view class="history-card" wx:for="{{historyList}}" wx:key="*this" wx:for-item="record" wx:for-index="index" data-key="{{record.meta.completedAt || index}}" bindtap="openReport">
        <view class="history-header">
          <view class="history-header-left">
            <text class="history-date">{{record.displayTime}}</text>
            <text class="history-tag">TOP 3</text>
          </view>
          <text class="history-delete" data-key="{{record.meta.completedAt || index}}" catchtap="deleteHistoryItem">删除</text>
        </view>
        <view class="history-top">
          <view class="history-chip" wx:for="{{record.topStrengths}}" wx:key="*this" wx:for-item="strength">
            {{strength}}
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
