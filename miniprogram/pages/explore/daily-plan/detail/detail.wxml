<!--pages/explore/daily-plan/detail/detail.wxml-->
<view class="container detail-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header-bar">
    <view class="back-btn" bindtap="goBack">
      <view class="back-icon"></view>
    </view>
    <view class="header-title">è®°å½•è¯¦æƒ…</view>
    <view class="header-placeholder"></view>
  </view>

  <block wx:if="{{hasData}}">
    <!-- é¡¶éƒ¨æç¤º -->
    <view class="hint-card">
      <text class="hint-text">è¿™æ˜¯å½“æ—¶çš„ä½ ç•™ä¸‹çš„è®°å½•ã€‚</text>
    </view>

    <!-- çº¸è´¨æ‰‹è´¦ä¸»ä½“ï¼ˆä¸ç¼–è¾‘é¡µé¢ä¸€è‡´ï¼‰ -->
    <view class="notebook-wrapper">
      <!-- æ—¥æœŸæ  -->
      <view class="date-bar">
        <view class="date-label">æ—¥ æœŸ</view>
        <view class="date-value">{{dateDisplay}}</view>
      </view>

      <!-- ä¸»å†…å®¹åŒº - å·¦å³åˆ†æ  -->
      <view class="main-content">
        <!-- å·¦ä¾§æ  -->
        <view class="left-column">
          <!-- å¥åº· / Health plan -->
          <view class="module health-module">
            <view class="module-header">
              <text class="module-title-cn">å¥åº·</text>
              <text class="module-title-en">/ Health plan</text>
            </view>
            <view class="health-row">
              <text class="health-label">è¿åŠ¨ï¼š</text>
              <text class="health-value">{{record.health.exercise || '___'}}</text>
              <text class="health-unit">åˆ†é’Ÿ</text>
            </view>
            <view class="health-row">
              <text class="health-label">é¥®æ°´ï¼š</text>
              <text class="health-value">{{record.health.water || '___'}}</text>
              <text class="health-unit">æ¯«å‡</text>
            </view>
            <view class="health-row">
              <text class="health-label">ç¡çœ ï¼š</text>
              <text class="health-value">{{record.health.sleep || '___'}}</text>
              <text class="health-unit">å°æ—¶</text>
            </view>
          </view>

          <!-- æ—¶é—´å¸ƒå±€ -->
          <view class="module timeline-module">
            <view class="timeline-header">
              <text class="timeline-title">æ—¶é—´å¸ƒå±€</text>
            </view>
            <view class="timeline-list">
              <view wx:for="{{allTimeSlots}}" wx:key="index" class="timeline-row">
                <text class="timeline-hour">{{item.time}}</text>
                <text class="timeline-value">{{item.plan || ''}}</text>
              </view>
            </view>
          </view>
        </view>

        <!-- å³ä¾§æ  -->
        <view class="right-column">
          <!-- å¾…åŠäº‹é¡¹ / To Do List -->
          <view class="module todo-module">
            <view class="module-header">
              <text class="module-title-cn">å¾…åŠäº‹é¡¹</text>
              <text class="module-title-en">/ To Do List</text>
            </view>
            <view class="list-items">
              <view wx:for="{{todoList}}" wx:key="index" class="list-row">
                <view class="list-checkbox {{item.completed ? 'checked' : ''}}">
                  <text wx:if="{{item.completed}}" class="check-icon">âœ“</text>
                </view>
                <view class="list-text-wrapper">
                  <text class="list-text {{item.completed ? 'completed' : ''}}">{{item.text}}</text>
                  <view wx:if="{{item.completed}}" class="strikethrough-line"></view>
                </view>
              </view>
            </view>
          </view>

          <!-- é‡è¦äº‹é¡¹ / Important List -->
          <view class="module important-module">
            <view class="module-header highlight">
              <text class="module-title-cn">é‡è¦äº‹é¡¹</text>
              <text class="module-title-en">/ Important List</text>
            </view>
            <view class="list-items">
              <view wx:for="{{importantList}}" wx:key="index" class="list-row">
                <view class="list-checkbox {{item.completed ? 'checked' : ''}}">
                  <text wx:if="{{item.completed}}" class="check-icon">âœ“</text>
                </view>
                <view class="list-text-wrapper">
                  <text class="list-text {{item.completed ? 'completed' : ''}}">{{item.text}}</text>
                  <view wx:if="{{item.completed}}" class="strikethrough-line"></view>
                </view>
              </view>
            </view>
          </view>

          <!-- å¿ƒå¾— / Acquaintance -->
          <view class="module insight-module">
            <view class="module-header highlight">
              <text class="module-title-cn">å¿ƒå¾—</text>
              <text class="module-title-en">/ Acquaintance</text>
            </view>
            <view class="insight-lines">
              <text class="insight-text">{{record.insight || ''}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- æ€»ç»“ / Summary -->
      <view class="module summary-module">
        <view class="module-header-full">
          <text class="module-title-cn">æ€»ç»“</text>
          <text class="module-title-en">/ Summary</text>
        </view>
        <view class="summary-area">
          <text class="summary-text">{{record.summary || ''}}</text>
        </view>
      </view>
    </view>

    <!-- ç”Ÿæˆå›¾ç‰‡æŒ‰é’® -->
    <view class="action-area">
      <view class="generate-btn" bindtap="generateImage">ç”Ÿæˆä¸€å¼ è®°å½•å›¾ç‰‡</view>
    </view>
  </block>

  <!-- æ— æ•°æ®çŠ¶æ€ -->
  <view wx:else class="empty-state">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">è¿™ä¸€å¤©æ²¡æœ‰ç•™ä¸‹è®°å½•</text>
  </view>
</view>
