<!--pages/explore/mbti/mbti.wxml-->
<brand-navbar title="可乐心岛" showBack="{{true}}" bind:ready="onNavReady" />

<view class="container mbti-container" style="padding-top: {{navBarHeight}}px;">
  <view class="header">
    <view class="header-title">🧩 MBTI 人格类型</view>
    <view class="header-subtitle">16种人格，你是哪一种？</view>
  </view>

  <!-- 当前MBTI -->
  <view wx:if="{{currentMBTI}}" class="current-mbti">
    <view class="mbti-type">{{currentMBTI}}</view>
    <view class="mbti-name">{{mbtiInfo[currentMBTI].name}}</view>
    <view class="mbti-desc">{{mbtiInfo[currentMBTI].desc}}</view>
  </view>

  <!-- MBTI选择 -->
  <view class="mbti-selector">
    <view class="selector-title">选择你的 MBTI 类型</view>
    
    <view class="mbti-grid">
      <view 
        wx:for="{{mbtiTypes}}" 
        wx:key="type"
        class="mbti-item {{selectedMBTI === item.type ? 'selected' : ''}}"
        bindtap="selectMBTI"
        data-type="{{item.type}}">
        <view class="mbti-type-text">{{item.type}}</view>
        <view class="mbti-name-text">{{item.name}}</view>
      </view>
    </view>

    <button class="btn-primary save-btn" bindtap="saveMBTI" disabled="{{!selectedMBTI}}">
      保存我的类型
    </button>
  </view>

  <!-- 历史记录入口 -->
  <view class="history-section" bindtap="viewHistory">
    <view class="history-card">
      <view class="history-icon">📋</view>
      <view class="history-content">
        <view class="history-title">查看测试历史</view>
        <view class="history-desc">查看你的所有 MBTI 测试记录</view>
      </view>
      <view class="history-arrow">›</view>
    </view>
  </view>

  <!-- 测试入口 -->
  <view class="test-section">
    <view class="test-section-title">🧪 不知道自己的类型？</view>

    <!-- A版：最新版测试（推荐） -->
    <view class="test-card test-card-primary" bindtap="startTestA">
      <view class="test-badge">推荐</view>
      <view class="test-card-header">
        <view class="test-icon">✨</view>
        <view class="test-info">
          <view class="test-title">最新官方版测试</view>
          <view class="test-subtitle">60 道题 · 约 8 分钟</view>
        </view>
      </view>
      <view class="test-desc">基于 16Personalities 官方风格，题目表述简洁直接，测试体验更流畅</view>
      <button class="btn-primary test-btn">
        开始最新版测试
      </button>
    </view>

    <!-- B版：传统版测试 -->
    <view class="test-card test-card-secondary" bindtap="startTestB">
      <view class="test-card-header">
        <view class="test-icon">📝</view>
        <view class="test-info">
          <view class="test-title">传统完整版测试</view>
          <view class="test-subtitle">70 道题 · 约 10 分钟</view>
        </view>
      </view>
      <view class="test-desc">经典测试题库，题目描述详细，覆盖范围更广</view>
      <button class="btn-secondary test-btn">
        开始传统版测试
      </button>
    </view>
  </view>

  <!-- 提示 -->
  <view class="hint-section">
    <view class="hint-title">💡 关于 MBTI</view>
    <view class="hint-text">MBTI 是一种性格分类指标，通过 4 个维度（E-I、S-N、T-F、J-P）将人格分为 16 种类型</view>
  </view>
</view>

