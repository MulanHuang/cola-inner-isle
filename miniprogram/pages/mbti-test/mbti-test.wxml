<!--pages/mbti-test/mbti-test.wxml-->
<brand-navbar title="å¯ä¹å¿ƒå²›" showBack="{{true}}" bind:ready="onNavReady" />

<view class="container test-container" style="padding-top: {{navBarHeight}}px;">
  <view class="bg-blur bg-1"></view>
  <view class="bg-blur bg-2"></view>

  <!-- è°ƒè¯•ä¿¡æ¯ -->
  <view wx:if="{{debugInfo}}" class="debug-banner">
    {{debugInfo}}
  </view>

  <!-- é¡¶éƒ¨æ ‡é¢˜ -->
  <view class="page-hero">
    <view class="hero-title">MBTI æ€§æ ¼æµ‹è¯•</view>
    <view class="hero-subtitle">ä¿æŒç¬¬ä¸€ååº”ï¼Œè½»æ¾å®Œæˆè¿™ä¸€åˆ»çš„å°å†’é™©</view>
  </view>

  <!-- è¿›åº¦æ¡ -->
  <view class="progress-section">
    <view class="progress-text">ç¬¬ {{currentIndex + 1}} é¢˜ / å…± {{totalCount}} é¢˜</view>
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{progress}}%"></view>
    </view>
    <view class="progress-percent">{{progress}}%</view>
    <view class="progress-subtitle">æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šè®°å½•ï¼Œè¯·æŒ‰èŠ‚å¥æ…¢æ…¢æ¥</view>
  </view>

  <!-- é¢˜ç›®å¡ç‰‡ -->
  <view class="question-card">
    <view class="question-number">Q{{currentIndex + 1}}</view>
    <view class="question-text">{{currentQuestion.question}}</view>
    <view class="dimension-tag">{{currentQuestion.dimension}}</view>
  </view>

  <!-- é€‰é¡¹æŒ‰é’® -->
  <view class="options-section">
    <view 
      wx:for="{{currentQuestion.options}}" 
      wx:key="key"
      class="option-button"
      bindtap="selectOption"
      hover-class="option-hover"
      hover-start-time="0"
      hover-stay-time="120"
      data-value="{{item.value}}">
      <view class="option-key">{{item.key}}</view>
      <view class="option-text">{{item.text}}</view>
    </view>
  </view>

  <!-- å¯¼èˆªæŒ‰é’® -->
  <view class="nav-buttons">
    <button 
      class="btn-secondary prev-btn" 
      bindtap="prevQuestion"
      hover-class="btn-hover"
      hover-start-time="0"
      hover-stay-time="120"
      disabled="{{currentIndex === 0}}">
      â† ä¸Šä¸€é¢˜
    </button>
  </view>

  <!-- æç¤º -->
  <view class="hint-card">
    <view class="hint-icon">ğŸ’¡</view>
    <view class="hint-text">æŒ‰ç…§ç¬¬ä¸€ååº”é€‰æ‹©ï¼Œæ— éœ€çº ç»“å¯¹é”™ï¼Œä¿æŒå½“ä¸‹æ„Ÿå—å³å¯</view>
  </view>
</view>
