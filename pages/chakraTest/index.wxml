<!--pages/chakraTest/index.wxml-->
<brand-navbar title="å¯ä¹å¿ƒå²›" showBack="{{true}}" bind:ready="onNavReady" />

<view class="container chakra-test-container" style="padding-top: {{navBarHeight}}px;">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="header-icon">ğŸ”®</view>
    <view class="header-title">è„‰è½®æµ‹è¯•</view>
    <view class="header-subtitle">æ¢ç´¢ä½ çš„èƒ½é‡ä¸­å¿ƒ</view>
    <view class="header-action" bindtap="viewHistory">
      <text class="action-icon">ğŸ“‹</text>
      <text class="action-text">å†å²è®°å½•</text>
    </view>
  </view>

  <!-- è¿›åº¦æ¡ -->
  <view class="progress-section">
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{progress}}%"></view>
    </view>
    <view class="progress-text">{{currentIndex + 1}} / {{totalQuestions}}</view>
  </view>

  <!-- é¢˜ç›®å¡ç‰‡ -->
  <view class="question-card card">
    <view class="question-number">ç¬¬ {{currentIndex + 1}} é¢˜</view>
    <view class="question-text">{{currentQuestion.question}}</view>

    <!-- é€‰é¡¹ -->
    <view class="options">
      <view
        wx:for="{{optionLabels}}"
        wx:key="value"
        class="option-item {{selectedAnswer === item.value ? 'selected' : ''}}"
        bindtap="selectOption"
        hover-class="option-item-hover"
        hover-stay-time="60"
        data-value="{{item.value}}"
      >
        <view class="option-radio">
          <view wx:if="{{selectedAnswer === item.value}}" class="option-radio-inner"></view>
        </view>
        <view class="option-label">{{item.label}}</view>
      </view>
    </view>
  </view>

  <!-- æŒ‰é’®ç»„ -->
  <view class="button-group">
    <button
      wx:if="{{currentIndex > 0}}"
      class="btn-secondary"
      bindtap="previousQuestion"
    >
      â† ä¸Šä¸€é¢˜
    </button>

    <button
      wx:if="{{currentIndex === totalQuestions - 1}}"
      class="btn-submit {{selectedAnswer ? 'active' : 'disabled'}}"
      bindtap="submitTest"
      disabled="{{!selectedAnswer}}"
    >
      âœ¨ æŸ¥çœ‹ç»“æœ
    </button>
  </view>

  <!-- æç¤ºæ–‡å­— -->
  <view class="hint-text">
    ğŸ’¡ è¯·æ ¹æ®ä½ çš„çœŸå®æ„Ÿå—ä½œç­”
  </view>
  <view class="hint-text" style="margin-top: 10rpx;">
    â± æœ¬æµ‹è¯•å…±å…«åé“é¢˜
  </view>
</view>
