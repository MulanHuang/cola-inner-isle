<!--pages/mbti-result/mbti-result.wxml-->
<brand-navbar title="å¯ä¹å¿ƒå²›" showBack="{{true}}" bind:ready="onNavReady" />

<view class="container result-container" style="padding-top: {{navBarHeight}}px;">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header fade-in">
    <view class="header-badge">âœ¨ æµ‹è¯•å®Œæˆ</view>
    <view class="header-title">ä½ çš„æ€§æ ¼æ¡£æ¡ˆ</view>
    <view class="header-line"></view>
  </view>

  <!-- ç»“æœä¸»å¡ç‰‡ - ä»ªå¼æ„Ÿè®¾è®¡ -->
  <view class="result-card slide-up">
    <view class="card-glow"></view>
    <view class="result-badge">
      <text class="badge-icon">ğŸ¯</text>
      <text class="badge-text">MBTI ç±»å‹</text>
    </view>
    <view class="result-type-wrapper">
      <view class="result-type">{{type}}</view>
      <view class="type-underline"></view>
    </view>
    <view class="result-name">{{typeInfo.name}}</view>
    <view class="result-divider"></view>
    <view class="result-desc">{{typeInfo.desc}}</view>
  </view>

  <!-- ä¸ªæ€§æ€»ç»“åŒºå— -->
  <view class="summary-card slide-up delay-1">
    <view class="summary-header">
      <text class="summary-icon">ğŸ’«</text>
      <text class="summary-title">ä¸ªæ€§é€Ÿè§ˆ</text>
    </view>
    <view class="summary-tags">
      <view class="summary-tag tag-{{item.colorType}}" wx:for="{{dimensions}}" wx:key="name">
        <text class="tag-letter">{{item.leftPercent > item.rightPercent ? item.left : item.right}}</text>
        <text class="tag-desc">{{item.leftPercent > item.rightPercent ? item.leftDesc : item.rightDesc}}</text>
      </view>
    </view>
  </view>

  <!-- ç»´åº¦å¯¹æ¯”åŒºåŸŸ -->
  <view class="dimensions-section slide-up delay-2">
    <view class="section-header">
      <view class="section-icon">ğŸ“Š</view>
      <view class="section-title-wrapper">
        <view class="section-title">å››ä¸ªç»´åº¦åˆ†æ</view>
        <view class="section-subtitle">æ·±å…¥äº†è§£ä½ çš„æ€§æ ¼å€¾å‘</view>
      </view>
    </view>

    <view class="dimensions-list">
      <view
        wx:for="{{dimensions}}"
        wx:key="name"
        class="dimension-card dimension-{{item.colorType}}"
        style="animation-delay: {{index * 100 + 300}}ms">

        <!-- ç»´åº¦ä¸»è¦ç»“æœæ ‡é¢˜ -->
        <view class="dimension-result-header">
          <text class="result-percent">{{item.leftPercent > item.rightPercent ? item.leftPercent : item.rightPercent}}%</text>
          <text class="result-label">{{item.leftPercent > item.rightPercent ? item.leftDesc : item.rightDesc}}</text>
        </view>

        <!-- èƒ¶å›Šå¼è¿›åº¦æ¡ -->
        <view class="capsule-bar-container">
          <view class="capsule-label label-left">
            <text class="label-text">{{item.leftLabel}}</text>
          </view>

          <view class="capsule-bar">
            <view class="capsule-fill-left animate-bar" style="width: {{item.leftPercent}}%"></view>
            <view class="capsule-indicator" style="left: {{item.leftPercent}}%"></view>
            <view class="capsule-fill-right animate-bar" style="width: {{item.rightPercent}}%"></view>
          </view>

          <view class="capsule-label label-right">
            <text class="label-text">{{item.rightLabel}}</text>
          </view>
        </view>

        <!-- ç»´åº¦è¯´æ˜ -->
        <view class="dimension-hint">
          <text class="hint-text">{{item.hint}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ·±åº¦è§£è¯»æŒ‰é’® - çªå‡ºè®¾è®¡ -->
  <view class="ai-section slide-up delay-3" wx:if="{{!showAnalysis}}">
    <view class="ai-card">
      <view class="ai-decoration">
        <view class="ai-circle circle-1"></view>
        <view class="ai-circle circle-2"></view>
        <view class="ai-circle circle-3"></view>
      </view>
      <view class="ai-content">
        <view class="ai-icon">ğŸï¸</view>
        <view class="ai-title">å°å²›æ·±åº¦è§£è¯»</view>
        <view class="ai-desc">åŸºäºä½ çš„æµ‹è¯•ç»“æœï¼Œè·å–ä¸“å±æ€§æ ¼åˆ†ææŠ¥å‘Š</view>
      </view>
      <button class="ai-btn glow-btn" bindtap="getAiAnalysis">
        <text class="btn-spark">âœ¨</text>
        <text class="btn-text">å¼€å¯è§£è¯»</text>
        <view class="btn-shine"></view>
      </button>
      <view class="ai-disclaimer">æœ¬å†…å®¹ç”±AIç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒ</view>
    </view>
  </view>

  <!-- æ·±åº¦è§£è¯»å†…å®¹ -->
  <view class="analysis-content slide-up" wx:if="{{showAnalysis}}">
    <view class="analysis-header">
      <view class="analysis-icon">ğŸï¸</view>
      <view class="analysis-title">å°å²›æ·±åº¦è§£è¯»</view>
      <view class="analysis-badge">ä¸“å±æŠ¥å‘Š</view>
    </view>
    <view class="analysis-body">
      <view class="analysis-text">{{analysis}}</view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
  <view class="action-section slide-up delay-4">
    <view class="action-buttons">
      <button class="btn-secondary" bindtap="retakeTest">
        <text class="btn-icon">ğŸ”„</text>
        <text>é‡æ–°æµ‹è¯•</text>
      </button>
      <button class="btn-primary" bindtap="goHome">
        <text class="btn-icon">ğŸ </text>
        <text>è¿”å›é¦–é¡µ</text>
      </button>
    </view>
  </view>

  <!-- åº•éƒ¨ç•™ç™½ -->
  <view class="footer-space"></view>
</view>

